

# ‚ú® **–≠—Ç–∞–ø 3 ‚Äî –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (BFS)**

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–∞–∫–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º–∞ **BFS (–ø–æ–∏—Å–∫ –≤ —à–∏—Ä–∏–Ω—É)** –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:

‚úî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≥–ª—É–±–∏–Ω—ã
‚úî —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚úî —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Debian/Ubuntu
‚úî —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚úî –ø–∞—Ä—Å–∏–Ω–≥–∞ Packages –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚úî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ CSV

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:

```
stage3.py                ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
stage3_config.csv        ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
test_repo/packages.txt   ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–Ω–∞–±–æ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
README.md                ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

# üì¶ **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

### üîπ 1. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (BFS)

* –ø–æ–∏—Å–∫ –≤ —à–∏—Ä–∏–Ω—É
* —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
* —É—á—ë—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≥–ª—É–±–∏–Ω—ã
* –∑–∞—â–∏—Ç–∞ –æ—Ç —Ü–∏–∫–ª–æ–≤

### üîπ 2. –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

| –†–µ–∂–∏–º         | –û–ø–∏—Å–∞–Ω–∏–µ                                             |
| ------------- | ---------------------------------------------------- |
| **Prod Mode** | –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ `Packages` –∏–∑ Debian/Ubuntu |
| **Test Mode** | –ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞      |

---

# üóÇ **–§–æ—Ä–º–∞—Ç test_repo/packages.txt**

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ (–∏–¥—ë—Ç –≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ):

```
A: B C
B: D
C:
D: A
```

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

* –ø–∞–∫–µ—Ç—ã ‚Äî **–∑–∞–≥–ª–∞–≤–Ω—ã–µ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã**
* —Ñ–æ—Ä–º–∞—Ç: `–ü–∞–∫–µ—Ç: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å1 –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å2 ‚Ä¶`
* –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª –∏–ª–∏ –∑–∞–ø—è—Ç—É—é
* –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: `C:`

---

# ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ stage3_config.csv**

–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```
package,max_depth,test_mode,test_repo_path,repo_url
A,5,YES,test_repo/packages.txt,-
```

### üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π

| –ü–æ–ª–µ               | –ó–Ω–∞—á–µ–Ω–∏–µ                                                       |
| ------------------ | -------------------------------------------------------------- |
| **package**        | –°—Ç–∞—Ä—Ç–æ–≤—ã–π –ø–∞–∫–µ—Ç                                                |
| **max_depth**      | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ BFS                                       |
| **test_mode**      | `YES` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª, `NO` ‚Äî —Å–∫–∞—á–∏–≤–∞—Ç—å Packages |
| **test_repo_path** | –ü—É—Ç—å –∫ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é                                   |
| **repo_url**       | URL —Ñ–∞–π–ª–∞ Packages (–≤ –ø—Ä–æ–¥-—Ä–µ–∂–∏–º–µ)                             |

---

# ‚ñ∂Ô∏è **–ó–∞–ø—É—Å–∫**

### **–û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫:**

```bash
python3 stage3.py -c stage3_config.csv
```

---

# üì§ **–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ (–¥–ª—è test_repo)**

–ò—Å—Ö–æ–¥–Ω—ã–π –≥—Ä–∞—Ñ:

```
A: B C
B: D
C:
D: A
```

–ö–æ–º–∞–Ω–¥–∞:

```bash
python3 stage3.py -c stage3_config.csv
```

–í—ã–≤–æ–¥:

```
–ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
A: ['B', 'C']
B: ['D']
C: []
D: ['A']
```

–¶–∏–∫–ª `A ‚Üí B ‚Üí D ‚Üí A` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω.

---

# üß† **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç BFS –≤ –ø—Ä–æ–µ–∫—Ç–µ**

BFS —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–µ–∫—É—Ä—Å–∏–µ–π:

```python
def build_bfs(start, direct, max_depth):
    visited = set()
    result = {}

    def rec(level_nodes, depth):
        if depth > max_depth:
            return

        next_nodes = []
        for node in level_nodes:
            if node in visited:
                continue
            visited.add(node)

            deps = direct.get(node, [])
            result[node] = deps

            for d in deps:
                if d not in visited:
                    next_nodes.append(d)

        if next_nodes:
            rec(next_nodes, depth + 1)

    rec([start], 0)
    return result
```

‚úî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `visited` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Ü–∏–∫–ª–æ–≤
‚úî —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
‚úî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≥–ª—É–±–∏–Ω–µ `max_depth`

---

# üß™ **–†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî –¥–ª—è —á–µ–≥–æ –æ–Ω –Ω—É–∂–µ–Ω?**

–†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`test_mode = YES`) –ø–æ–∑–≤–æ–ª—è–µ—Ç:

* –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≥—Ä–∞—Ñ–æ–≤
* —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–∏–∫–ª—ã
* –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–∞
* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ë–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–∏—Ö real-world —Ñ–∞–π–ª–æ–≤ `Packages`.

---

# üå± –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –≥—Ä–∞—Ñ–æ–≤ (–º–æ–∂–µ—à—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª—é–±—ã–µ)

### üî∏ –ü—Ä–æ—Å—Ç–æ–π –ª–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ

```
A: B
B: C
C:
```

### üî∏ –ì—Ä–∞—Ñ —Å —Ä–æ–º–±–æ–º

```
A: B C
B: D
C: D
D:
```

### üî∏ –ì—Ä–∞—Ñ —Å —Ü–∏–∫–ª–æ–º

```
A: B
B: C
C: A
```


–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî —Å–∫–∞–∂–∏, –∏ —è –¥–æ–±–∞–≤–ª—é —Ä–∞–∑–¥–µ–ª "–û–±—Ä–∞—Ç–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏" (–µ—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å —ç—Ç–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ –≠—Ç–∞–ø–µ 4).
